{"version":3,"sources":["App.js","index.js"],"names":["App","props","changebackground","icon","answer","datebuilder","d","day","getDay","date","getDate","month","getMonth","year","getFullYear","convertdate","dt","Date","toLocaleString","hour","minute","hour12","setQuery","name","setState","query","autosugession","document","getElementsByClassName","style","display","autosuggesion","active","url","fetch","then","resp","json","data","features","handleClick","lonlat","getElementById","value","searchautocomplete","search","evt","key","api","urlbase","state","res","result","weather","className","this","sys","id","type","placeholder","autoComplete","onChange","e","target","onKeyPress","map","item","i","properties","onClick","geometry","coordinates","country","layer","coord","src","main","temp","feels_like","description","wind","speed","clouds","all","pressure","humidity","cod","version","xmlns","xmlnsXlink","x","y","width","height","viewBox","enable-","xmlSpace","Component","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.67d29357.chunk.js","sourcesContent":["import React, { useState, Component } from 'react';\n\nclass App extends Component {\n\n  //Khởi tạo constuctor\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      weather: {},\n      autosuggesion: {\n        active: 0,\n        data: {}\n      },\n\n    }\n    //Tạo api\n    this.api = {\n      key: \"baedc2f2f31b7b3303e5d42d88d283c3\",\n      urlbase: \"https://api.openweathermap.org/data/2.5/weather\"\n    }\n\n    /*\n    *useState cho phép chúng ta khai báo local state trong Function Component cách mà trước để chỉ dùng cho Class Component.\n    *https://viblo.asia/p/doi-chut-ve-usestate-trong-react-hooks-07LKXpVeKV4\n\n    *query: định nghĩa tên của state nó có thể là đơn giá trị hoặc object,.. (là thamg số của useState)\n    *setQuery: định nghĩa tên function dùng cho việc update state (là thamg số của useState)\n    */\n    //const [weather, setWeather] = useState({});\n\n  }\n\n  /**\n   * Thay đổi lại background cho đúng với chủ đề thời tiết\n   * @param {*} icon \n   */\n  changebackground = (icon) => {\n    let answer;\n    switch (icon) {\n      case 800: case 801: case 802:\n        answer = \"sunny\";\n        break;\n      case 200: case 201: case 202:\n        answer = \"windy\";\n        break;\n      case 300: case 301: case 302:\n        answer = \"cloud\";\n        break;\n      default:\n        answer = \"rain\";\n    }\n    return 'app ' + answer + '';\n  }\n\n  /**\n   * chỉ dùng để convert ngày tháng cho đẹp\n   * @param {date} d - ngày tháng \n   */\n  datebuilder = (d) => {\n    let daysinweek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    let monthsinyear = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    let day = daysinweek[d.getDay()];\n    let date = d.getDate();\n    let month = monthsinyear[d.getMonth()];\n    let year = d.getFullYear();\n    return `${day} ${date} ${month} ${year}`\n  }\n\n  /**\n   * convert date sang local string cho đẹp\n   * @param {date} dt \n   */\n  convertdate = (dt) => {\n    return (new Date(dt * 1000)).toLocaleString('en-GB', { hour: '2-digit', minute: '2-digit', hour12: true })\n  }\n\n\n  /**\n   * Khi ta type keyword onchange nó sẽ bắt qua hàm này\n   * @param {string} name - từ khóa gợi ý \n   */\n  setQuery = (name) => {\n    this.setState({\n      query: name\n    });\n    //auto suggesion\n    this.autosugession(name)\n  }\n\n\n\n  /**\n   * Hàm tự động gợi ý từ khóa\n   * @param {string} name - từ khóa để gợi ý \n   */\n  autosugession = (name) => {\n    document.getElementsByClassName('autosuggesion')[0].style.display = \"block\"\n    this.setState({\n      autosuggesion: {\n        active: 1,\n      }\n    });\n\n    \n    const url = `https://app.geocodeapi.io/api/v1/search?apikey=557eb0d0-2577-11eb-99c5-1782ab3e0148&text=${name}`;\n    // site that doesn’t send Access-Control-*\n    fetch(url).then((resp) => resp.json())\n      .then((data) => {\n        this.setState({\n          autosuggesion: {\n            data: data.features\n          }\n        })\n    })\n  }\n\n  /**\n   * khi gợi ý xong, và người dùng click vào từng điểm gợi ý, ta sẽ dùng hàm này để show dự báo\n   * @param {object} lonlat\n   */\n  handleClick = (lonlat) => {\n    document.getElementsByClassName('autosuggesion')[0].style.display = \"none\"\n    document.getElementById('searchboxinput').value = \"\";\n    this.searchautocomplete(lonlat);\n  }\n\n\n  /**\n   * Sự kiện khi đánh xong seach và enter\n   * @param {object} evt  là hàm ta truyền vào để xác định hành động là enter hay không\n   */\n  search = evt => {\n    if (evt.key === \"Enter\") //nếu hành động là enter\n    {\n      //lúc này ta sử dụng fetch để crawl dữ liệu\n\n      fetch(`${this.api.urlbase}?q=${this.state.query}&units=metric&APPID=${this.api.key}`)\n        .then(\n          res => res.json()\n        )\n        .then(result => {\n          this.setState({\n            weather: result\n          });\n\n        })\n    }\n  }\n\n  /**\n   * Sự kiện đánh xong search nhưng click vào autocomplete\n   * @param {object} lonlat kinh độ và vĩ độ ở object\n   */\n  searchautocomplete = (lonlat) => {\n    //lúc này ta sử dụng fetch để crawl dữ liệu\n    fetch(`${this.api.urlbase}?lat=${lonlat[1]}&lon=${lonlat[0]}&units=metric&APPID=${this.api.key}`)\n      .then(\n        res => res.json()\n      )\n      .then(result => {\n        this.setState({\n          weather: result\n        });\n      })\n  }\n  render() {\n    return (\n\n\n\n\n      <div className={\n\n\n        (typeof (this.state.weather.sys)) === 'undefined' ? 'app' : this.changebackground(this.state.weather.weather[0].id)}>\n\n      <div id=\"Clouds\">\n        <div className=\"Cloud Foreground\" />\n        <div className=\"Cloud Background\" />\n        <div className=\"Cloud Foreground\" />\n        <div className=\"Cloud Background\" />\n        <div className=\"Cloud Foreground\" />\n        <div className=\"Cloud Background\" />\n        <div className=\"Cloud Background\" />\n        <div className=\"Cloud Foreground\" />\n        <div className=\"Cloud Background\" />\n        <div className=\"Cloud Background\" />\n        {/*  <svg viewBox=\"0 0 40 24\" class=\"Cloud\"><use xlink:href=\"#Cloud\"></use></svg>*/}\n      </div>\n\n        <main>\n\n\n          <div className=\"searchbox\">\n            <input name=\"\" id=\"searchboxinput\" className=\"btn btn-primary search\" type=\"text\" placeholder=\"Search..\"\n              autoComplete=\"off\"\n              //Khi ta type key word\n              onChange={e => this.setQuery(e.target.value)}  //lúc này ta truyền giá trị  từ input vào setQuery\n              onKeyPress={this.search}\n            //value={query}\n            />\n\n            <div className=\"autosuggesion\">{(this.state.autosuggesion.active == 0) ? '' :\n              (typeof (this.state.autosuggesion.data) !== 'undefined') ?\n                this.state.autosuggesion.data.map((item, i) => {\n\n                  if (typeof (item.properties.name) !== 'undefined') {\n\n                    return <li\n                      key={i}\n                      name={item.properties.name}\n                      onClick={(e) => this.handleClick(item.geometry.coordinates, e)}\n\n                    >{item.properties.name},{item.properties.country}, {item.properties.layer}</li>;\n                  }\n                })\n                : ''\n            }</div>\n          </div>\n\n          {(typeof (this.state.weather.sys) !== 'undefined' && typeof (this.state.weather.coord) != 'undefined') ?\n            <div className=\"locationbox\">\n              <div className=\"locationname\">{this.state.weather.name}, {this.state.weather.sys.country}</div>\n              <div className=\"datetime\">Today: {this.datebuilder(new Date())}, Update: {this.convertdate(this.state.weather.dt)}</div>\n\n              <div className=\"weatherbox\">\n                <div className=\"temperature\"> <div><img src={'https://openweathermap.org/img/wn/' + this.state.weather.weather[0].icon + '@2x.png'} /> {this.state.weather.main.temp}°C <h2>Feels Like: {this.state.weather.main.feels_like}°C</h2></div></div>\n                <div className=\"weather\"> {this.state.weather.weather[0].description}</div>\n                <div className=\"weatherother\">\n                  <li>Wind: {this.state.weather.wind.speed} m/s</li>\n                  <li>Cloud: {this.state.weather.clouds.all} / 10</li>\n                  <li>Pressure: {this.state.weather.main.pressure} hpa</li>\n                  <li>humidity: {this.state.weather.main.humidity} % </li>\n                </div>\n              </div>\n            </div>\n\n            : (typeof (this.state.weather.sys) == 'undefined' && this.state.weather.cod === '404') ?\n              (<div className=\"searchinitial\"> LOCATION DOES NOT EXIST!</div>)\n              : (<div className=\"searchinitial\"> TYPE YOUR LOCATION ON SEARCH BOX</div>)\n          }\n\n        </main>\n\n\n      <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"40px\" height=\"24px\" viewBox=\"0 0 40 24\" enable- xmlSpace=\"preserve\">\n        <defs>\n          <path id=\"Cloud\" d=\"M33.85,14.388c-0.176,0-0.343,0.034-0.513,0.054c0.184-0.587,0.279-1.208,0.279-1.853c0-3.463-2.809-6.271-6.272-6.271\n        c-0.38,0-0.752,0.039-1.113,0.104C24.874,2.677,21.293,0,17.083,0c-5.379,0-9.739,4.361-9.739,9.738\n        c0,0.418,0.035,0.826,0.084,1.229c-0.375-0.069-0.761-0.11-1.155-0.11C2.811,10.856,0,13.665,0,17.126\n        c0,3.467,2.811,6.275,6.272,6.275c0.214,0,27.156,0.109,27.577,0.109c2.519,0,4.56-2.043,4.56-4.562\n        C38.409,16.43,36.368,14.388,33.85,14.388z\" />\n        </defs>\n      </svg>\n\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}